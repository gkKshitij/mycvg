{% extends 'cvg/base.html' %}


{% block title %}{{student.title}}{% endblock %}
{% block content %}

    <div>
        {% if student.published_date %}
        <div>
            {{student.published_date}}
        </div>
        {% else %}
            <a href="{% url 'cvg:student_publish' pk=student.pk %}" class="btn btn-primary">Publish</a>
        {% endif %}

        {% if user.is_authenticated %}
        <a href="{% url 'cvg:student_edit' pk=student.pk %}"><i class="fa fa-edit fa-4x"></i></a>
        <a href="{% url 'cvg:delete_student' pk=student.pk %}" class="btn btn-danger" 
        onclick="return confirm('Are you sure?')"><i class="fa fa-trash-o fa-2x" aria-hidden="true"></i></a>
        {% endif %}

        <h1>{{student.title}}</h1>
        <p>{{ student.text }}</p>
    </div>

    <hr> 

    <a href="{% url 'cvg:add_comment' pk=student.pk %}" class="btn btn-secondary">Add Comment</a>
    <br>

    {% for comment in student.comments.all %}
    {% if user.is_authenticated or comment.approved %}
        <div class="">

        {% if not comment.approved and user.is_superuser %}
        <a href="{% url 'cvg:approve_comment' pk=comment.pk %}" class="btn btn-primary"><i class="fa fa-check" aria-hidden="true"></i></a>
        <a href="{% url 'cvg:remove_comment' pk=comment.pk %}" class="btn"><i class="fa fa-trash" aria-hidden="true"></i></a>
        {% endif %}
            <strong>{{comment.author}}</strong>
            <p>{{ comment.text }}</p>
            {% endif %}
            {% empty %}

        </div>
    <p>No comments yet..</p>
    
    {% endfor %}
    
{% endblock %}